<% provide(:title, "#{@user.name}のプロフィール") %>
<% breadcrumb :users_show, @user %>
<div class="whole">
  <%= render "shared/flash_messages" %>
  <div class="title">
    <div class="title-container">
      <%= breadcrumbs separator: " &rsaquo; " %> 
      <div class="title-container-first-line">
        <div class="title-container-first-line-left">
          <% if @user.image.present? %>
            <%= image_tag @user.image, alt: "#{@user.name}のユーザーアイコン" %>
          <% else %>
            <%= image_tag "/user_image/user_image_default_ye.png", alt: "デフォルトユーザーアイコン" %>
          <% end %>
        </div>
        <div class="title-container-first-line-right">
          <% if @user === current_user %>
            <%= link_to "プロフィールを編集", edit_user_registration_path, class: "to-edit-profile-button hover-opacity", "data-turbolinks": false %>
          <% end %>
        </div>
      </div>
      <h2><%= @user.name %></h2>
      <p><%= @user.profile %></p>
      <div class="title-container-footer">
        <ul>
          <div class="vertical-border"></div>
          <li>
            投稿数<br>
            <span class="font-weight-bold">
              <%= @posts_count %>
            </span>
          </li>
          <div class="vertical-border"></div>
          <li>
            被お気に入り数<br>
            <span class="font-weight-bold">
              #
            </span>
          </li>
          <div class="vertical-border"></div>
          <li>
            ランク<br>
            <span class="font-weight-bold">
              <%= @user.rank.present? ? @user.rank : "未設定" %>
            </span>
          </li>
          <div class="vertical-border"></div>
          <li>
            ウデマエ<br>
            <span class="font-weight-bold">
              <%= @user.prowess.present? ? @user.prowess : "未設定" %>
            </span>
          </li>
          <div class="vertical-border"></div>
        </ul>
      </div>
    </div>
  </div>
  <div class="main">
    <div class="main-container">
      <h3 class="main-container-h3"><%= @user.name %>の投稿</h3>
      <div class="posts">
        <% if @posts.present? %>
          <%= render @posts %>
        <% else %>
          <div class="no-post-message">
            <p>まだ投稿はありません。</p>
            <% if @user === current_user %>
              <%= link_to "＋投稿する", new_post_path, class: "to-new-post-button hover-transform" %>
            <% end %>
          </div>
        <% end %>
      </div>
      <%= link_to "&lt; ユーザー一覧に戻る".html_safe, list_users_path, class: "button top-button posts-button" %>
    </div>
  </div>
</div>
<%= link_to "＋投稿する", new_post_path, class: "fixed_to_post_link" %>
